<ng-container *ngIf="ingredients && formula">
  <div *ngFor="let ingredient of ingredients" class="table3-container mt-4">
    <h4 class="m-0 p-2">
      <strong [style.fontSize.%]="fontSize">
        {{ ingredient.name }}
      </strong>
    </h4>
    <table class="table">
      <thead>
        <tr>
          <th [style.fontSize.%]="fontSize" colspan="4" scope="col">
            {{
              'FORMULAS.FORMULAS-DETAILS.INGREDIENTS_TABLE-COMPOUND.table-head-title'
                | translate
            }}
          </th>
          <th [style.fontSize.%]="fontSize" class="text-right" scope="col">
            %
          </th>
          <th
            *ngIf="!validation(ingredient.ingredients)"
            [style.fontSize.%]="fontSize"
            class="text-right"
            scope="col"
          >
            gr
          </th>
        </tr>
      </thead>
      <tbody *ngFor="let i of ingredient.ingredients">
        <tr class="table-row__info">
          <td [style.fontSize.%]="fontSize" colspan="4" scope="row">
            {{ i.ingredient.name }}
          </td>
          <td [style.fontSize.%]="fontSize" class="text-right">
            {{ i.percentage }}
          </td>
          <td
            *ngIf="!i.ingredient.formula"
            [style.fontSize.%]="fontSize"
            class="text-right"
          >
            {{ getIngredientsGrams(i.percentage) }}
          </td>
        </tr>
        <tr class="table-row__barprogress">
          <td colspan="6">
            <mat-progress-bar
              mode="determinate"
              value="{{ i.percentage }}"
            ></mat-progress-bar>
          </td>
        </tr>
      </tbody>
      <tr>
        <td [style.fontSize.%]="fontSize" colspan="4" scope="row">Total</td>
        <td [style.fontSize.%]="fontSize" class="text-right">
          {{ getTotalPercentage(ingredient.ingredients) }}
        </td>
        <td
          *ngIf="!validation(ingredient.ingredients)"
          [style.fontSize.%]="fontSize"
          class="text-right"
        >
          {{ getTotalGrams(ingredient.ingredients) }}
        </td>
      </tr>
    </table>
  </div>
  <app-table-ingredient-compound-detail
    [weight]="formula.unit_weight"
    [unit]="formula.units"
    [ingredients]="ingredients"
  ></app-table-ingredient-compound-detail>
</ng-container>
